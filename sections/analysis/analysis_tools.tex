\subsection{Analysis Tools}

The \texttt{analysis\_tools} package provides a framework to allow reproducible, automatic creation of plots and metrics through a set of configurable, reusable tools that can be used in pipeline execution and interactive analysis.
The package allows metrics and plots to be consistently created at various points in the pipeline and ensures that the metrics dispatched to the monitoring dashboard are generated in sync with the archived plots.

\texttt{analysis\_tools} is built on top of \texttt{pex\_config}, detailed in Section \ref{sec:config}, this allows it to integrate into the rest of the software pipelines and to be very flexible in its application. It also means that the configuration details of how each tool was run are saved everytime, allowing them to be accurately recreated with information such as the signal to noise ratio used to cut down the data.

An example plot, made with HSC data, is shown in Fig.~\ref{fig:atools}.
The package was designed to handle the large data volumes and memory requirements that the survey will generate to ensure that the initial QA products required are rapidly made and readily available for fast action on any emergent data quality issues.
The individual tools run in the pipelines to calculate the metrics can then be reused in an interactive environment, such as a script or notebook, allowing further investigation into arising issues to reproduce exactly what was originally run.

\texttt{analysis\_tools} is the successor to \texttt{Faro} \citet{2022SPIE12189E..0MG} and \texttt{analysis\_drp}. Previously the QA plots and metrics were calculated by different packages, this allowed the code and selection criteria used to get out of sync between the plots and metrics. Combining the two packages into one improves memory and speed performance as well as maintaing consistency.

Further information and examples can be found in \citet{DMTN-314}.

\begin{figure}[h]
\plotone{atoolsPlot.pdf}
\caption{An example figure produced as part of the standard processing by analysis tools, the plot is information dense as it is designed for an audience familiar with the outputs but a simplified version can also be produced for talks and publications by setting a config option.
The metrics shown in the bottom right of the plot are also saved separately to be displayed by various pieces of QA tooling.}
\label{fig:atools}
\end{figure}
